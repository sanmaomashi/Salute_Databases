# 数据备份与恢复

在本章中，我们将介绍如何在SQLite中备份和恢复数据，以防数据丢失或损坏。

## 一、使用SQLite命令行备份数据

SQLite提供了一个名为`sqlite3`的命令行工具，可以用于执行SQL查询、管理数据库文件以及备份和恢复数据。以下是如何使用`sqlite3`备份数据的示例：

```sql
sqlite3 your_database_file.db ".backup your_backup_file.db"
```

在这个示例中，我们使用`sqlite3`工具从名为`your_database_file.db`的数据库文件创建一个名为`your_backup_file.db`的备份。请将这两个文件名替换为您实际使用的文件名。

## 二、使用SQLite命令行恢复数据

要使用`sqlite3`工具从备份文件恢复数据，可以使用以下命令：

```sql
sqlite3 your_new_database_file.db ".restore your_backup_file.db"
```

在这个示例中，我们使用`sqlite3`工具从名为`your_backup_file.db`的备份文件恢复数据到一个名为`your_new_database_file.db`的新数据库文件。请将这两个文件名替换为您实际使用的文件名。

请注意，这将覆盖目标数据库文件中的所有现有数据。如果您要恢复数据到一个现有的数据库，请确保在执行此操作之前备份该数据库。

## 三、在程序中备份数据

SQLite还提供了一个名为[Online Backup API](https://www.sqlite.org/backup.html)的API，可以在程序中执行数据备份。以下是一个使用Python和SQLite的`sqlite3`库进行数据备份的示例：

```sql
import sqlite3

source_db = sqlite3.connect("your_database_file.db")
backup_db = sqlite3.connect("your_backup_file.db")

with backup_db:
    source_db.backup(backup_db)

source_db.close()
backup_db.close()
```

在这个示例中，我们使用Python的`sqlite3`库从名为`your_database_file.db`的数据库文件创建一个名为`your_backup_file.db`的备份。请将这两个文件名替换为您实际使用的文件名。
